<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Seven Sins of Python - Sin 6 | Klebstoff</title>
<meta name=keywords content="seven-sins-of-python"><meta name=description content="Sin number 6: Packaging not done right Packaging Python projects properly can be truly a pain in the neck. However learning how to properly set up a package is extremely valuable because adherence to standards means more people can use your package efficiently.
👉 The biggest sin of all things package-related is storing Python projects as simple collections of directories.
Whence the temptation? Python is a simple scripting lanugage so the natural tendency newcomers have is to simply create folders with a bunch of scripts and then run those folders one by one."><meta name=author content><link rel=canonical href=http://kjczarne.github.io/2022-01-17-seven-sins-of-python-sin-6/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=http://kjczarne.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://kjczarne.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://kjczarne.github.io/favicon-32x32.png><link rel=apple-touch-icon href=http://kjczarne.github.io/apple-touch-icon.png><link rel=mask-icon href=http://kjczarne.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Seven Sins of Python - Sin 6"><meta property="og:description" content="Sin number 6: Packaging not done right Packaging Python projects properly can be truly a pain in the neck. However learning how to properly set up a package is extremely valuable because adherence to standards means more people can use your package efficiently.
👉 The biggest sin of all things package-related is storing Python projects as simple collections of directories.
Whence the temptation? Python is a simple scripting lanugage so the natural tendency newcomers have is to simply create folders with a bunch of scripts and then run those folders one by one."><meta property="og:type" content="article"><meta property="og:url" content="http://kjczarne.github.io/2022-01-17-seven-sins-of-python-sin-6/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-17T20:16:32+01:00"><meta property="article:modified_time" content="2022-01-17T20:16:32+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Seven Sins of Python - Sin 6"><meta name=twitter:description content="Sin number 6: Packaging not done right Packaging Python projects properly can be truly a pain in the neck. However learning how to properly set up a package is extremely valuable because adherence to standards means more people can use your package efficiently.
👉 The biggest sin of all things package-related is storing Python projects as simple collections of directories.
Whence the temptation? Python is a simple scripting lanugage so the natural tendency newcomers have is to simply create folders with a bunch of scripts and then run those folders one by one."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://kjczarne.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Seven Sins of Python - Sin 6","item":"http://kjczarne.github.io/2022-01-17-seven-sins-of-python-sin-6/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Seven Sins of Python - Sin 6","name":"Seven Sins of Python - Sin 6","description":"Sin number 6: Packaging not done right Packaging Python projects properly can be truly a pain in the neck. However learning how to properly set up a package is extremely valuable because adherence to standards means more people can use your package efficiently.\n👉 The biggest sin of all things package-related is storing Python projects as simple collections of directories.\nWhence the temptation? Python is a simple scripting lanugage so the natural tendency newcomers have is to simply create folders with a bunch of scripts and then run those folders one by one.","keywords":["seven-sins-of-python"],"articleBody":"Sin number 6: Packaging not done right Packaging Python projects properly can be truly a pain in the neck. However learning how to properly set up a package is extremely valuable because adherence to standards means more people can use your package efficiently.\n👉 The biggest sin of all things package-related is storing Python projects as simple collections of directories.\nWhence the temptation? Python is a simple scripting lanugage so the natural tendency newcomers have is to simply create folders with a bunch of scripts and then run those folders one by one. They tend to skip thinking about how pip install is able to seemingly magically conjure foreign code out of nothingness and when they start reading on it, they claim it’s too much work to set it up properly.\nI used to be one of those people when I started out with Python. Today, I tend to freak out massively if I see Python projects that are not set up as any formal package and have some strange custom installation patterns.\nWhy is this a sin? This is predominantly sin of hubris and laziness combined, we all succumb to these sometimes. Hubris, because people often think they can come up with simpler and better packaging solutions than the entire community of Python developers combined. Laziness, because often instead of reading up on the standards, they take the path of the least resistance which often ends in extremely poor scalability.\nNot to mention the confusion other Python developers familiar with the existing toolchains will experience when looking at a codebase with a bespoke packaging solution.\nHow to recognize a sinner? The most common symptoms are easy to spot:\nNo setup.py at the Python project root Inability to pip install the package Strange instructions on how to set up and use the project (which often boil down to run main.py or something akin) Profuse usage of quasi-anti-patterns like sys.path.append How to repent? Your only way to redemption is to structure your Python package properly, i.e. you need to learn a bit about what they are and how to make them. It is actually quite simple and I’ll attempt to explain it in an easy-to-understand form.\nA Python package is a collection of modules defined in *.py files structured in such a way that lets pip package manager to install this collection and be globally used in any other script that uses a particular Python intepreter.\n👀 Modules are Python files and directories of Python files that contain a special __init__.py file that makes it possible to import them. Packages are just collections of modules.\nThere are a few important peculiarities about Python packages:\nA Python package is not equivalent to a single Git repo -\u003e a Git repo can contain multiple Python packages at once A Python package must contain an __init__.py file in each directory to be treated as a package A Python pacakge must have a setup.py file at the root of the repository, it might contain an explicit map to Python package directory names or it might use the find_packages() function which automatically looks for packages in subdirectories Packages are described in detail in Python documentation.\nPackage structure If your package has a structure:\nX | |-\u003e Y |-\u003e Z |-\u003e setup.py … the Y and Z will be treated as packages, not X. If you want X as a package the conventional pattern is to do:\nX | |-\u003e X | |-\u003e Y | |-\u003e Z | |-\u003e setup.py ⚠ Git Repo != Python Package. A single Git repo according to Python standards could contain multiple Python packages.\nName conflicts resulting from improper structure Suppose you have designed two packages that look like this:\nX | |-\u003e Y |-\u003e Z |-\u003e setup.py W | |-\u003e Y |-\u003e Z |-\u003e setup.py The way Python installs packages is by running setup.py and in setup.py you’ve usually got a find_packages() function call. If it finds any existing package named Y it will uninstall it and install the one that you just told it to install. So e.g. if you do pip install X you would actually be adding two packages named Y and Z to the list of installed packages. If you were to then do pip install W you would get a name conflict because Y and Z refer to sth that came from X and pip would resolve the conflict by removing what was previously installed and installing the new thing.\nPlease don’t use plain folders If you were to say let’s not use a Python package, just use folders. What will happen then is in every script you will have to modify the import lookup path for Python to be able to find the modules you’re trying to import. So if I want to get e.g. X/Y/modules/somescript.py from a file that is located in Z I would need to do:\nimport sys, os sys.path.append(os.path.join(os.path.dirname(__file__), \"..\", \"Y\")) sys.path.append(os.path.join(os.path.dirname(__file__), \"..\", \"Y\", \"modules\")) from Y.modules import somescript Instead of doing just:\nfrom Y.modules import somescript 👀 That’s because Python uses the sys.path list of directories to look up *.py files and load modules from. By default sys.path contains the current working directory but not the subdirectories, so you would have to add each subdirectory to the sys.path list were you not to use a standard Python package.\n🙏 So please do yourself a favor and follow the standards outlined in PEP documents to not run into such strange problems. Many open-source tools doing stuff with Python packages may downright assume this structure and if you don’t follow the standard you risk on missing out on goodies as well as making the project way less maintainable.\nThe __init__.py For the find_packages() function idiomatically used in setup.py to automatically detect all the Python files belonging to a particular package, you need to add at least an empty __init__.py file at each directory level.\n👀 __init__.py is used as the module definition file and is the first file to be executed when you’re importing a directory-level module into any other Python script. It can be left empty or it can contain some initialization logic depending on how you want to set up your package.\nSo the proper structure for a package X with two directory-level modules Y and Z would normally look like this:\nX | |-\u003e X | |-\u003e Y | | |-\u003e __init__.py | | | |-\u003e Z | | |-\u003e __init__.py | | | |-\u003e __init__.py | |-\u003e setup.py setup.py and setup.cfg My recommendation is to use a minimal setup.py and a second declarative configuration file named setup.cfg since it’s always easier to read a declarative file than a custom Python script. So if you can, stay with setup.py as close to this as possible:\nfrom setuptools import setup if __name__ == \"__main__\": setup() Whereas your setup.cfg should be the file describing your package through-and-through. Here is an example from mkcommit:\n[metadata] name = mkcommit author = Krzysztof J. Czarnecki author_email = kjczarne@gmail.com version = attr: mkcommit.__version__ url = https://github.com/kjczarne/mkcommit description = Dead-simple tool for enforcing clean commit messages. long_description = file: README.md long_description_content_type = text/markdown keywords = git, commit, style, templates license = MIT classifiers = License :: OSI Approved :: MIT License Programming Language :: Python :: 3 Programming Language :: Python :: 3.7 [options] zip_safe = False include_package_data = True packages = find: python_requires = \u003e=3.6 install_requires = InquirerPy pyperclip prettyprinter pyyaml requests [options.entry_points] console_scripts = mkcommit = mkcommit.main:main [options.extras_require] dev = pdoc flake8 twine setuptools autopep8 nox [flake8] exclude = .git, __pycache__, build, dist, .tox, .nox, .pytest_cache max_complexity = 12 max_line_length = 100 ignore = E731 E116 E114 E221 E241 Skipping the obvious stuff like author or url that points to the repo, there are a few entries that deserve an explanation:\nversion -\u003e you could always store a version tag here as a literal but what I like to do is to use attr: project_name.__version__ directive. In the __init__.py that is at the root of my Python package I place a __version__ = \"0.0.1\" variable which I can later use from within the modules to e.g. decide what API version to use.\n👀 The attr: part is a directive that will try to find a particular attribute (variable) in a Python module.\nlong_description -\u003e I usually use file: README.md, which is a directive that opens a README.md file at the root of the repo and will use the contents as a long description. This is exactly what you see when you inspect Python packages on PyPi.\nlong_description_content_type -\u003e default format used by setuptools is RST. I prefer Markdown in most cases, so I set text/markdown. Otherwise you should prepare your README.rst file but it doesn’t look nearly as good as the Markdown variant on GitHub or GitLab.\nlicense -\u003e if you’re planning to upload the package to pypi.org for everybody to use, this should be a valid open-source license name.\nclassifiers -\u003e this is used by registries like pypi.org to categorize the package. Nobody ever remembers them, everybody copies them from PyPi. The License and Programming Language classifiers are the minimum required by PyPi.\nzip_safe -\u003e believe it or not but Python packages can be installed in a compressed (ZIP) format that makes them a bit smaller in size and usually makes them run a tiny bit faster. Turning this on is however not recommended in larger projects since not all resources can be used in a compressed form.\ninclude_package_data -\u003e when set to true you can specify patterns in a MANIFEST.in file at the root of your repo (or wherever setup.py is) to include non-Python files along with the package. By default Python packages only consist of the Python source code files so if you need other files for the package to correctly operate and create the MANIFEST.in. For example:\ninclude project\\spec.yaml include project/spec.yaml include project\\spec.schema.json include project/spec.schema.json recursive-include project/pdoc *.* recursive-include project\\pdoc *.* 👀 If the file pattern didn’t match, the file will simply not be included. But because Windows and *NIX systems have a different path separator, you will likely need to duplicate the includes if you’re building the project on more than one platform.\npackages -\u003e if you follow the standard package structure that I outlined, you will always use find: directive here. This is equivalent to calling find_packages() in setup.py and it makes setuptools discover the packages without having to list them explicitly.\npython_requires -\u003e minimum required version of Python for the project to work.\ninstall_requires -\u003e a list of pip packages that your package uses and depends on.\nconsole_scripts -\u003e a list of commands that will automatically be exposed when pip installs your package. For example mkcommit = mkcommit.main:main maps an mkcommit command that you can run in the shell to the function main in the module mkcommit.main. This corresponds to executing your def main() from main.py that’s located in mkcommit folder in your repo. Take a look at mkcommit’s code if this sounds confusing and track it. You’ll realize it makes sense.\ndev -\u003e these are tools that are necessary for the package only during development but not when a 3rd party wants to use your package. For example nox is used to automate package testing and deployment but the end user should never want to touch nox and the package itself works perfectly without it installed.\nflake8 section -\u003e this is the configuration I use for my linter of choice, which is flake8. The linter is used to force yourself and other people to maintain good standardized code style.\nBuilding your package When you want to create a package and share it with others the easiest thing to do is:\npython -m setup bdist_wheel # or python -m build If you run it in the same directory where your setup.py lives, your package should be zipped into a *.whl file.\n👀 You can unzip *.whl files just as if they were normal *.zip folders.\nYou can now send the file to somebody and tell them to install it:\npip install .whl That’s it. setuptools might make it a pain for developers but it makes things so much simpler for the users. After all, developers should manage complexity, not the end users.\nDeploying your package If you want to deploy your package to a registry, an internal company registry or pypi.org, you should use twine. For PyPi it’s quite simple:\npip install twine # install twine twine upload -r testpypi dist/* # test if the upload works twine upload dist/* # upload your package You can learn way more from the documentation.\n⚠ Beware: a package once uploaded to PyPi can never be removed. All packages and their versions are immutable so make sure you don’t make mistakes here. If you exposed some credentials this way, change them immediately!\nFinal words So yeah, it might be a bit dense but with the minimal amount of information outlined in this article you should be able to hit the ground running with Python packages. I will leave you with a thought: I’ve seen large commercial projects set up as folders of scripts where stringing any two parts together was an incredibly painful mess. You shouldn’t wish the same happens to your project if you want it to enter production. The patterns that were set up so far were long years in development and involved a lot of discussions and compromises. There are newer, more convenient systems like Poetry but until they take the industry by storm, sticking to the standards is your best chance for success, particularly because most Python developers are already familiar with them, which makes working in teams and open-source communities nicer. If you want to use Poetry, fine, but don’t ignore its older brother. That’s simply not an option (yet).\n","wordCount":"2295","inLanguage":"en","datePublished":"2022-01-17T20:16:32+01:00","dateModified":"2022-01-17T20:16:32+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://kjczarne.github.io/2022-01-17-seven-sins-of-python-sin-6/"},"publisher":{"@type":"Organization","name":"Klebstoff","logo":{"@type":"ImageObject","url":"http://kjczarne.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://kjczarne.github.io/ accesskey=h title="Klebstoff (Alt + H)">Klebstoff</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://kjczarne.github.io/posts/ title=posts><span>posts</span></a></li><li><a href=http://kjczarne.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=http://kjczarne.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=http://kjczarne.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=http://kjczarne.github.io/about/ title=about><span>about</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Seven Sins of Python - Sin 6</h1><div class=post-meta>&lt;span title='2022-01-17 20:16:32 +0100 +0100'>January 17, 2022&lt;/span>&amp;nbsp;·&amp;nbsp;11 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#sin-number-6-packaging-not-done-right aria-label="Sin number 6: Packaging not done right">Sin number 6: Packaging not done right</a><ul><li><a href=#whence-the-temptation aria-label="Whence the temptation?">Whence the temptation?</a></li><li><a href=#why-is-this-a-sin aria-label="Why is this a sin?">Why is this a sin?</a></li><li><a href=#how-to-recognize-a-sinner aria-label="How to recognize a sinner?">How to recognize a sinner?</a></li><li><a href=#how-to-repent aria-label="How to repent?">How to repent?</a><ul><li><a href=#package-structure aria-label="Package structure">Package structure</a></li><li><a href=#name-conflicts-resulting-from-improper-structure aria-label="Name conflicts resulting from improper structure">Name conflicts resulting from improper structure</a><ul><li><a href=#please-dont-use-plain-folders aria-label="Please don&amp;rsquo;t use plain folders">Please don&rsquo;t use plain folders</a></li></ul></li><li><a href=#the-__init__py aria-label="The __init__.py">The <code>__init__.py</code></a></li><li><a href=#setuppy-and-setupcfg aria-label="setup.py and setup.cfg"><code>setup.py</code> and <code>setup.cfg</code></a></li></ul></li><li><a href=#building-your-package aria-label="Building your package">Building your package</a></li><li><a href=#deploying-your-package aria-label="Deploying your package">Deploying your package</a></li><li><a href=#final-words aria-label="Final words">Final words</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=sin-number-6-packaging-not-done-right>Sin number 6: Packaging not done right<a hidden class=anchor aria-hidden=true href=#sin-number-6-packaging-not-done-right>#</a></h2><p>Packaging Python projects properly can be truly a pain in the neck. However learning how to properly set up a package is extremely valuable because adherence to standards means more people can use your package efficiently.</p><blockquote><p>👉 The biggest sin of all things package-related is storing Python projects as simple collections of directories.</p></blockquote><h3 id=whence-the-temptation>Whence the temptation?<a hidden class=anchor aria-hidden=true href=#whence-the-temptation>#</a></h3><p>Python is a simple scripting lanugage so the natural tendency newcomers have is to simply create folders with a bunch of scripts and then run those folders one by one. They tend to skip thinking about how <code>pip install</code> is able to seemingly magically conjure foreign code out of nothingness and when they start reading on it, they claim it&rsquo;s too much work to set it up properly.</p><p>I used to be one of those people when I started out with Python. Today, I tend to freak out massively if I see Python projects that are not set up as any formal package and have some strange custom installation patterns.</p><h3 id=why-is-this-a-sin>Why is this a sin?<a hidden class=anchor aria-hidden=true href=#why-is-this-a-sin>#</a></h3><p>This is predominantly sin of hubris and laziness combined, we all succumb to these sometimes. Hubris, because people often think they can come up with simpler and better packaging solutions than the entire community of Python developers combined. Laziness, because often instead of reading up on the standards, they take the path of the least resistance which often ends in extremely poor scalability.</p><p>Not to mention the confusion other Python developers familiar with the existing toolchains will experience when looking at a codebase with a bespoke packaging solution.</p><h3 id=how-to-recognize-a-sinner>How to recognize a sinner?<a hidden class=anchor aria-hidden=true href=#how-to-recognize-a-sinner>#</a></h3><p>The most common symptoms are easy to spot:</p><ul><li>No <code>setup.py</code> at the Python project root</li><li>Inability to <code>pip install</code> the package</li><li>Strange instructions on how to set up and use the project (which often boil down to <em>run <code>main.py</code></em> or something akin)</li><li>Profuse usage of quasi-anti-patterns like <code>sys.path.append</code></li></ul><h3 id=how-to-repent>How to repent?<a hidden class=anchor aria-hidden=true href=#how-to-repent>#</a></h3><p>Your only way to redemption is to structure your Python package properly, i.e. you need to learn a bit about what they are and how to make them. It is actually quite simple and I&rsquo;ll attempt to explain it in an easy-to-understand form.</p><p>A Python package is a collection of modules defined in <code>*.py</code> files structured in such a way that lets <code>pip</code> package manager to install this collection and be globally used in any other script that uses a particular Python intepreter.</p><blockquote><p>👀 Modules are Python files and directories of Python files that contain a special <code>__init__.py</code> file that makes it possible to <code>import</code> them. Packages are just collections of modules.</p></blockquote><p>There are a few important peculiarities about Python packages:</p><ul><li>A Python package is not equivalent to a single Git repo -> a Git repo can contain multiple Python packages at once</li><li>A Python package must contain an <code>__init__.py</code> file in each directory to be treated as a package</li><li>A Python pacakge must have a <code>setup.py</code> file at the root of the repository, it might contain an explicit map to Python package directory names or it might use the <code>find_packages()</code> function which automatically looks for packages in subdirectories</li></ul><p>Packages are described in detail in <a href=https://docs.python.org/3/tutorial/modules.html#packages>Python documentation</a>.</p><h4 id=package-structure>Package structure<a hidden class=anchor aria-hidden=true href=#package-structure>#</a></h4><p>If your package has a structure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>X  
</span></span><span style=display:flex><span>|  
</span></span><span style=display:flex><span>|-&gt; Y  
</span></span><span style=display:flex><span>|-&gt; Z  
</span></span><span style=display:flex><span>|-&gt; setup.py  
</span></span></code></pre></div><p>&mldr; the <code>Y</code> and <code>Z</code> will be treated as packages, <strong>not</strong> <code>X</code>. If you want <code>X</code> as a package the conventional pattern is to do:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>X  
</span></span><span style=display:flex><span>|  
</span></span><span style=display:flex><span>|-&gt; X  
</span></span><span style=display:flex><span>|   |-&gt; Y  
</span></span><span style=display:flex><span>|   |-&gt; Z  
</span></span><span style=display:flex><span>|  
</span></span><span style=display:flex><span>|-&gt; setup.py
</span></span></code></pre></div><blockquote><p>⚠ Git Repo != Python Package. A single Git repo according to Python standards could contain multiple Python packages.</p></blockquote><h4 id=name-conflicts-resulting-from-improper-structure>Name conflicts resulting from improper structure<a hidden class=anchor aria-hidden=true href=#name-conflicts-resulting-from-improper-structure>#</a></h4><p>Suppose you have designed two packages that look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>X  
</span></span><span style=display:flex><span>|  
</span></span><span style=display:flex><span>|-&gt; Y  
</span></span><span style=display:flex><span>|-&gt; Z  
</span></span><span style=display:flex><span>|-&gt; setup.py  
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>W  
</span></span><span style=display:flex><span>|  
</span></span><span style=display:flex><span>|-&gt; Y  
</span></span><span style=display:flex><span>|-&gt; Z  
</span></span><span style=display:flex><span>|-&gt; setup.py  
</span></span></code></pre></div><p>The way Python installs packages is by running <code>setup.py</code> and in <code>setup.py</code> you&rsquo;ve usually got a <code>find_packages()</code> function call. If it finds any existing package named <code>Y</code> it will uninstall it and install the one that you just told it to install. So e.g. if you do <code>pip install X</code> you would actually be adding two packages named <code>Y</code> and <code>Z</code> to the list of installed packages. If you were to then do <code>pip install W</code> you would get a name conflict because <code>Y</code> and <code>Z</code> refer to sth that came from <code>X</code> and <code>pip</code> would resolve the conflict by removing what was previously installed and installing the new thing.</p><h5 id=please-dont-use-plain-folders>Please don&rsquo;t use plain folders<a hidden class=anchor aria-hidden=true href=#please-dont-use-plain-folders>#</a></h5><p>If you were to say <em>let&rsquo;s not use a Python package, just use folders</em>. What will happen then is in every script you will have to modify the import lookup path for Python to be able to find the modules you&rsquo;re trying to import. So if I want to get e.g. <code>X/Y/modules/somescript.py</code> from a file that is located in <code>Z</code> I would need to do:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> sys<span style=color:#f92672>,</span> os  
</span></span><span style=display:flex><span>sys<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>append(os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>join(os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>dirname(__file__), <span style=color:#e6db74>&#34;..&#34;</span>, <span style=color:#e6db74>&#34;Y&#34;</span>))  
</span></span><span style=display:flex><span>sys<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>append(os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>join(os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>dirname(__file__), <span style=color:#e6db74>&#34;..&#34;</span>, <span style=color:#e6db74>&#34;Y&#34;</span>, <span style=color:#e6db74>&#34;modules&#34;</span>))  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> Y.modules <span style=color:#f92672>import</span> somescript
</span></span></code></pre></div><p>Instead of doing just:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> Y.modules <span style=color:#f92672>import</span> somescript
</span></span></code></pre></div><blockquote><p>👀 That&rsquo;s because Python uses the <code>sys.path</code> list of directories to look up <code>*.py</code> files and load modules from. By default <code>sys.path</code> contains the current working directory but not the subdirectories, so you would have to add each subdirectory to the <code>sys.path</code> list were you not to use a standard Python package.</p></blockquote><blockquote><p>🙏 So please do yourself a favor and follow the standards outlined in PEP documents to not run into such strange problems. Many open-source tools doing stuff with Python packages may downright assume this structure and if you don&rsquo;t follow the standard you risk on missing out on goodies as well as making the project way less maintainable.</p></blockquote><h4 id=the-__init__py>The <code>__init__.py</code><a hidden class=anchor aria-hidden=true href=#the-__init__py>#</a></h4><p>For the <code>find_packages()</code> function idiomatically used in <code>setup.py</code> to automatically detect all the Python files belonging to a particular package, you need to add at least an empty <code>__init__.py</code> file at each directory level.</p><blockquote><p>👀 <code>__init__.py</code> is used as the module definition file and is the first file to be executed when you&rsquo;re importing a directory-level module into any other Python script. It can be left empty or it can contain some initialization logic depending on how you want to set up your package.</p></blockquote><p>So the proper structure for a package <code>X</code> with two directory-level modules <code>Y</code> and <code>Z</code> would normally look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>X  
</span></span><span style=display:flex><span>|  
</span></span><span style=display:flex><span>|-&gt; X  
</span></span><span style=display:flex><span>|   |-&gt; Y
</span></span><span style=display:flex><span>|   |   |-&gt; __init__.py
</span></span><span style=display:flex><span>|   |
</span></span><span style=display:flex><span>|   |-&gt; Z
</span></span><span style=display:flex><span>|   |   |-&gt; __init__.py
</span></span><span style=display:flex><span>|   |
</span></span><span style=display:flex><span>|   |-&gt; __init__.py
</span></span><span style=display:flex><span>|
</span></span><span style=display:flex><span>|-&gt; setup.py
</span></span></code></pre></div><h4 id=setuppy-and-setupcfg><code>setup.py</code> and <code>setup.cfg</code><a hidden class=anchor aria-hidden=true href=#setuppy-and-setupcfg>#</a></h4><p>My recommendation is to use a minimal <code>setup.py</code> and a second declarative configuration file named <code>setup.cfg</code> since it&rsquo;s always easier to read a declarative file than a custom Python script. So if you can, stay with <code>setup.py</code> as close to this as possible:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> setuptools <span style=color:#f92672>import</span> setup
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>setup()
</span></span></code></pre></div><p>Whereas your <code>setup.cfg</code> should be the file describing your package through-and-through. Here is an example from <a href=https://github.com/kjczarne/mkcommit/>mkcommit</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#66d9ef>[metadata]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>mkcommit</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>author</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>Krzysztof J. Czarnecki</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>author_email</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>kjczarne@gmail.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>version</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>attr: mkcommit.__version__</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>https://github.com/kjczarne/mkcommit</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>description</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>Dead-simple tool for enforcing clean commit messages.</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>long_description</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>file: README.md</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>long_description_content_type</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>text/markdown</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>keywords</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>git, commit, style, templates</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>license</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>MIT</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>classifiers</span> <span style=color:#f92672>=</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    License :: OSI Approved :: MIT License
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Programming Language :: Python :: 3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Programming Language :: Python :: 3.7</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[options]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>zip_safe</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>False</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>include_package_data</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>True</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>packages</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>find:</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>python_requires</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&gt;=3.6</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>install_requires</span> <span style=color:#f92672>=</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    InquirerPy
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    pyperclip
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    prettyprinter
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    pyyaml
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    requests</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[options.entry_points]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>console_scripts</span> <span style=color:#f92672>=</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    mkcommit = mkcommit.main:main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[options.extras_require]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>dev</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    pdoc
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    flake8
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    twine
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    setuptools
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    autopep8
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    nox</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[flake8]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>exclude</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    .git,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    __pycache__,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    build,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    dist,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    .tox,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    .nox,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    .pytest_cache</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>max_complexity</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>12</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>max_line_length</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>100</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ignore</span> <span style=color:#f92672>=</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    E731
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    E116
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    E114
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    E221
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    E241</span>
</span></span></code></pre></div><p>Skipping the obvious stuff like <code>author</code> or <code>url</code> that points to the repo, there are a few entries that deserve an explanation:</p><ul><li><p><code>version</code> -> you could always store a version tag here as a literal but what I like to do is to use <code>attr: project_name.__version__</code> directive. In the <code>__init__.py</code> that is at the root of my Python package I place a <code>__version__ = "0.0.1"</code> variable which I can later use from within the modules to e.g. decide what API version to use.</p><blockquote><p>👀 The <code>attr:</code> part is a directive that will try to find a particular attribute (variable) in a Python module.</p></blockquote></li><li><p><code>long_description</code> -> I usually use <code>file: README.md</code>, which is a directive that opens a <code>README.md</code> file at the root of the repo and will use the contents as a long description. This is exactly what you see when you inspect Python packages on <a href=https://pypi.org>PyPi</a>.</p></li><li><p><code>long_description_content_type</code> -> default format used by <code>setuptools</code> is RST. I prefer Markdown in most cases, so I set <code>text/markdown</code>. Otherwise you should prepare your <code>README.rst</code> file but it doesn&rsquo;t look nearly as good as the Markdown variant on GitHub or GitLab.</p></li><li><p><code>license</code> -> if you&rsquo;re planning to upload the package to <code>pypi.org</code> for everybody to use, this should be a valid open-source license name.</p></li><li><p><code>classifiers</code> -> this is used by registries like <code>pypi.org</code> to categorize the package. Nobody ever remembers them, everybody copies them from <a href=https://pypi.org/classifiers/>PyPi</a>. The <code>License</code> and <code>Programming Language</code> classifiers are the minimum required by PyPi.</p></li><li><p><code>zip_safe</code> -> believe it or not but Python packages can be installed in a compressed (ZIP) format that makes them a bit smaller in size and usually makes them run a tiny bit faster. Turning this on is however not recommended in larger projects since not all resources can be used in a compressed form.</p></li><li><p><code>include_package_data</code> -> when set to true you can specify patterns in a <code>MANIFEST.in</code> file at the root of your repo (or wherever <code>setup.py</code> is) to include non-Python files along with the package. By default Python packages only consist of the Python source code files so if you need other files for the package to correctly operate and create the <code>MANIFEST.in</code>. For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>include project\spec.yaml
</span></span><span style=display:flex><span>include project/spec.yaml
</span></span><span style=display:flex><span>include project\spec.schema.json
</span></span><span style=display:flex><span>include project/spec.schema.json
</span></span><span style=display:flex><span>recursive-include project/pdoc *.*
</span></span><span style=display:flex><span>recursive-include project\pdoc *.*
</span></span></code></pre></div><blockquote><p>👀 If the file pattern didn&rsquo;t match, the file will simply not be included. But because Windows and *NIX systems have a different path separator, you will likely need to duplicate the includes if you&rsquo;re building the project on more than one platform.</p></blockquote></li><li><p><code>packages</code> -> if you follow the standard package structure that I outlined, you will always use <code>find:</code> directive here. This is equivalent to calling <code>find_packages()</code> in <code>setup.py</code> and it makes <code>setuptools</code> discover the packages without having to list them explicitly.</p></li><li><p><code>python_requires</code> -> minimum required version of Python for the project to work.</p></li><li><p><code>install_requires</code> -> a list of <code>pip</code> packages that your package uses and depends on.</p></li><li><p><code>console_scripts</code> -> a list of commands that will automatically be exposed when <code>pip</code> installs your package. For example <code>mkcommit = mkcommit.main:main</code> maps an <code>mkcommit</code> command that you can run in the shell to the function <code>main</code> in the module <code>mkcommit.main</code>. This corresponds to executing your <code>def main()</code> from <code>main.py</code> that&rsquo;s located in <code>mkcommit</code> folder in your repo. Take a look at <a href=https://github.com/kjczarne/mkcommit>mkcommit&rsquo;s code</a> if this sounds confusing and track it. You&rsquo;ll realize it makes sense.</p></li><li><p><code>dev</code> -> these are tools that are necessary for the package only during development but not when a 3rd party wants to use your package. For example <code>nox</code> is used to automate package testing and deployment but the end user should never want to touch <code>nox</code> and the package itself works perfectly without it installed.</p></li><li><p><code>flake8</code> section -> this is the configuration I use for my linter of choice, which is <code>flake8</code>. The linter is used to force yourself and other people to maintain good standardized code style.</p></li></ul><h3 id=building-your-package>Building your package<a hidden class=anchor aria-hidden=true href=#building-your-package>#</a></h3><p>When you want to create a package and share it with others the easiest thing to do is:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python -m setup bdist_wheel
</span></span><span style=display:flex><span><span style=color:#75715e># or</span>
</span></span><span style=display:flex><span>python -m build
</span></span></code></pre></div><p>If you run it in the same directory where your <code>setup.py</code> lives, your package should be zipped into a <code>*.whl</code> file.</p><blockquote><p>👀 You can unzip <code>*.whl</code> files just as if they were normal <code>*.zip</code> folders.</p></blockquote><p>You can now send the file to somebody and tell them to install it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install &lt;name&gt;.whl
</span></span></code></pre></div><p>That&rsquo;s it. <code>setuptools</code> might make it a pain for developers but it makes things so much simpler for the users. After all, developers should manage complexity, not the end users.</p><h3 id=deploying-your-package>Deploying your package<a hidden class=anchor aria-hidden=true href=#deploying-your-package>#</a></h3><p>If you want to deploy your package to a registry, an internal company registry or <code>pypi.org</code>, you should use <code>twine</code>. For PyPi it&rsquo;s quite simple:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install twine                <span style=color:#75715e># install twine</span>
</span></span><span style=display:flex><span>twine upload -r testpypi dist/*  <span style=color:#75715e># test if the upload works</span>
</span></span><span style=display:flex><span>twine upload dist/*              <span style=color:#75715e># upload your package</span>
</span></span></code></pre></div><p>You can learn way more from the <a href=https://twine.readthedocs.io/en/latest/>documentation</a>.</p><blockquote><p>⚠ Beware: a package once uploaded to PyPi can never be removed. All packages and their versions are immutable so make sure you don&rsquo;t make mistakes here. If you exposed some credentials this way, change them immediately!</p></blockquote><h3 id=final-words>Final words<a hidden class=anchor aria-hidden=true href=#final-words>#</a></h3><p>So yeah, it might be a bit dense but with the minimal amount of information outlined in this article you should be able to hit the ground running with Python packages. I will leave you with a thought: I&rsquo;ve seen large commercial projects set up as folders of scripts where stringing any two parts together was an incredibly painful mess. You shouldn&rsquo;t wish the same happens to your project if you want it to enter production. The patterns that were set up so far were long years in development and involved a lot of discussions and compromises. There are newer, more convenient systems like <a href=https://python-poetry.org/>Poetry</a> but until they take the industry by storm, sticking to the standards is your best chance for success, particularly because most Python developers are already familiar with them, which makes working in teams and open-source communities nicer. If you want to use Poetry, fine, but don&rsquo;t ignore its older brother. That&rsquo;s simply not an option (yet).</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://kjczarne.github.io/tags/seven-sins-of-python/>seven-sins-of-python</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Seven Sins of Python - Sin 6 on twitter" href="https://twitter.com/intent/tweet/?text=Seven%20Sins%20of%20Python%20-%20Sin%206&amp;url=http%3a%2f%2fkjczarne.github.io%2f2022-01-17-seven-sins-of-python-sin-6%2f&amp;hashtags=seven-sins-of-python"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Seven Sins of Python - Sin 6 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2fkjczarne.github.io%2f2022-01-17-seven-sins-of-python-sin-6%2f&amp;title=Seven%20Sins%20of%20Python%20-%20Sin%206&amp;summary=Seven%20Sins%20of%20Python%20-%20Sin%206&amp;source=http%3a%2f%2fkjczarne.github.io%2f2022-01-17-seven-sins-of-python-sin-6%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Seven Sins of Python - Sin 6 on reddit" href="https://reddit.com/submit?url=http%3a%2f%2fkjczarne.github.io%2f2022-01-17-seven-sins-of-python-sin-6%2f&title=Seven%20Sins%20of%20Python%20-%20Sin%206"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Seven Sins of Python - Sin 6 on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2fkjczarne.github.io%2f2022-01-17-seven-sins-of-python-sin-6%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Seven Sins of Python - Sin 6 on whatsapp" href="https://api.whatsapp.com/send?text=Seven%20Sins%20of%20Python%20-%20Sin%206%20-%20http%3a%2f%2fkjczarne.github.io%2f2022-01-17-seven-sins-of-python-sin-6%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Seven Sins of Python - Sin 6 on telegram" href="https://telegram.me/share/url?text=Seven%20Sins%20of%20Python%20-%20Sin%206&amp;url=http%3a%2f%2fkjczarne.github.io%2f2022-01-17-seven-sins-of-python-sin-6%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//kjczarne.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
<script type=text/javascript src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0,securityLevel:"loose"})</script><script>window.onload=function(){mermaid.init(void 0,".language-mermaid")}</script></article></main><footer class=footer><span>Copyright 2021 Krzysztof J. Czarnecki. Fair use permitted with authorship attribution. Commercial use disallowed without explicit permission. Some links in blog articles are affiliate links when noted.</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>